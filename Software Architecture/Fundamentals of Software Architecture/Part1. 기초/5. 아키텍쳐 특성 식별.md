# 5. 아키텍쳐 특성 식별

- 아키텍쳐를 구축하거나 기존 아키텍쳐의 타당성을 검증할 때 제일 먼저 해야 하는 일은 아키텍쳐의 특성을 식별하는 것이다.  
  주어진 문제 영역이나 애플리케이션에서 아키텍쳐 특성을 정확히 식별하기 위해 아키텍트는 해당 도메인을 잘 이해하고 있어야 하고,  
  도메인 이해관계자들과 협력해 도메인 관점에서 중요한 것들을 결정해야 한다.

- 아키텍트는 적어도 다음 세 가지 출처에서 아키텍쳐 특성을 밝혀낸다.

  - 도메인 관심사
  - 요구사항
  - 암묵적 도메인 지식

## 5.1 도메인 관심사에서 아키텍쳐 특성 도출

- 아키텍쳐에서 가장 흔한 안티패턴 중 하나는 모든 아키텍쳐 특성을 지원하는 제네릭 아키텍쳐를 설계하려는 것이다.  
  지원 가능한 아키텍쳐 특성 하나하나가 전체 시스템 설계를 복잡하게 만드는 요인이기에, 너무 많은 아키텍쳐 특성을 수용하면  
  아키텍쳐가 너무 복잡해진다. 아키텍쳐 특성의 개수에 연연하지 말고 가급적 설계를 단순화하자.

- 아키텍쳐 특성 최종 목록에 우선순위를 두지 말고, 순서를 무작위로 섞은 최종 목록을 주고, 각자 가장 중요한 특성 3개를 뽑는  
  방식으로 해야 자연스럽게 합의를 이끌어내기 쉽고, 가장 중요한 것이 무엇일까 더 논의하게 되고, 아키텍트가 tradeoff 분석을  
  하는 데에도 도움이 된다.

- 아키텍트는 도메인 관심사를 아키텍쳐 특성으로 옮길 수 있어야 한다. 아래는 예시 표이다.

  | 도메인 관심사 | 아키텍쳐 특성                                        |
  | ------------- | ---------------------------------------------------- |
  | 인수 합병     | 상호운용성, 확장성, 적응성, 신장성                   |
  | 출시 시기     | 민첩성, 시험성, 배포성                               |
  | 유저 만족     | 성능, 가용성, 내고장성, 시험성, 배포성, 민첩성, 보안 |
  | 경쟁 우위     | 민첩성, 시험성, 배포성, 확장성, 가용성, 내고장성     |
  | 시간 및 예산  | 단순성, 실행성                                       |

---

## 5.2 요구사항에서 아키텍쳐 특성 도출

- 요구사항 정의서에 명시된 문장에서 도출되는 아키텍쳐 특성들도 있다.  
  예를 들어, 예상 유저 수와 그에 따른 확장 문제는 보통 도메인 관심사에서 빠지지 않는 단골 손님이다.  
  어느 아키텍트가 수강신청 프로그램을 개발한다고 해보자. 계산 편의상, 총 학생 수는 1000명이고 학생 1인 당 10시간의 수강 신청을  
  한다고 하면, 등록 기간 중 학생들의 시스템 이용 시간이 고루 분산되리라는 전제 하에 시스템 규모를 일정하게 설계해야 할까,  
  아니면 보통 학생들의 성향과 습관을 바탕으로 마감 10분전에 1000명 학생 모두가 수강 신청을 해도 문제없는 시스템을 설계해야 할까?

---

## 5.3 사례 연구: 실리콘 샌드위치

- 설명: 실리콘 샌드위치는 전국 가맹점을 보유한 샌드위치 브랜드로, 온라인 주문 시스템을 구축하려 한다.
- 유저: 앞으로 수천 명, 어쩌면 수백만 명에 달할 지도 모른다.
- 요구사항

  - 유저가 주문을 하면 샌드위치를 픽업하러 갈 시간 및 상점까지 가는 경로를 전달받는다. (교통 정보 등을 위한 외부 지도 서비스와의 연계는 필수)
  - 배달 서비스가 가능한 지점은 기사를 보내 샌드위치를 유저에게 배달한다.
  - 모바일 기기에서도 이용 가능하다.
  - 전국 어느 지점이나 이용 가능한 프로모션, 스페셜 행사를 제공한다.
  - 특정 지점에서만 이용 가능한 프로모션, 스페셜 행사를 제공한다.
  - 온라인 결제, 대면 결제, 배송 시 결제 등 다양한 결제 옵션을 제공한다.

- 부가 컨텍스트

  - 샌드위치 지점은 가맹점이므로 소유자가 다 다르다.
  - 모회사는 머지않아 해외 시장도 진출할 계획이다.
  - 이 회사는 값싼 인력을 고용해 이윤을 최대화하는 것이 목표다.

- 위 시나리오를 받은 아키텍트는 아키텍쳐 특성을 도출해야 한다.  
  요구사항 하나가 여러 아키텍쳐 특성과 연관이 있고, 없을 수도 있다.  
  하지만 아키텍트의 입무는 엄청난 노력을 기울여 설계, 특히 구조와 관련이 있거나 영향을 미치는 것들을 찾아내는 것이다.  
  먼저 아키텍쳐 특성이 될만한 것들을 명시적인 것과 암묵적인 것으로 분류해보자.

### 5.3.1 명시적 특성

- 명시적 아키텍쳐 특성은 필요한 설계의 일부로서 요구사항 정의서에 기술된다.
- 아키텍트가 가장 먼저 눈여겨 봐야할 부분은 유저 수이다. 수백만 명에 이를 수 있기에 확장성, 즉 유의미한 성능 저하 없이  
  다수에 동시 유저를 처리하는 능력이 무엇보다 중요한 아키텍쳐 특성으로 보인다. 요구사항 정의서에 확장성이 등장하는 것은 아니지만,  
  예상 유저 수만 보더라도 그렇게 명시된 것이나 다름없다.
- 순간적으로 폭증한 유저 요청을 처리하기 위해서는 탄력성도 필요하다.  
  확장성과 탄력성은 한몸처럼 나타날 때도 많지만, 제약조건은 각각 다르다. 확장성은 동시 유저 성능을 나타내는 반면, 탄력성은  
  트래픽이 폭주하는 정도를 나타낸다.
- 호텔 예약 시스템처럼, 확장성은 좋지만 탄력적이지 않은 시세틈도 있다. 특별 할인 행사가 없어도 투숙객 수는 대체로 일정하다.  
  하지만 콘서트 예약 시스템은 다른데, 탄력성이 크지 않으면 순식간에 몰리는 트래픽을 시스템이 버틸 재간이 없다.  
  물론 탄력적인 시스템도 트래픽 폭증과 엄청난 동시 유저 접속을 처리할 수 있는 확장성은 필요하다.

- 이렇게 요구사항 정의서에는 없지만, 아키텍트는 아키텍쳐 특성을 문제 영역 내의 요구 사항에서 찾아낼 수 있어야 한다.  
  요구사항마다 아키텍쳐 특성이 존재하는지 확인하는 과정을 일부만 확인해보자.

> - 유저가 주문을 하면 샌드위치를 픽업하러 갈 시간 및 상점까지 가는 경로를 전달받는다. (교통 정보 등을 위한 외부 지도 서비스와의 연계는 필수)

- 외부 지도 서비스는 연계 지점에 해당하므로 신뢰성 같은 특성에 영향을 미칠 수 있다. 서드파티 시스템에 의존하는 시스템은 서드파티  
  시스템 호출이 실패할 경우, 전체 시스템 안정성이 타격을 입는다. 외부 지도 서비스가 다운되었다고 해보자. 이때, 실리콘 샌드위치 사이드  
  전체가 멎는게 좋을까, 아니면 교통 정보가 빠진, 조금 덜 쓸모 있는 서비스를 제공해야 할까? 아키텍트는 불필요한 불안정성 또는 취약점이  
  설계에 반영되지 않도록 항상 조심해야 한다.

> - 배달 서비스가 가능한 지점은 기사를 보내 샌드위치를 유저에게 배달한다.

- 이 요구사항을 충족하기 위한 별도 아키텍쳐 특성은 필요 없어 보인다.

> - 모바일 기기에서도 이용 가능하다.

- 이 요구사항은 애플리케이션을 설계할 때 이식성 좋은 웹앱과 다양한 네이티브 웹앱 중 어느쪽으로 개발한 것인지의 방향성을  
  결정하는 것처럼 큰 비중을 차지한다. 예산은 한정되어 있고 프로그램은 단순해야 하므로 다수의 애플리케이션 제작은 무리라고  
  판단해서, 모바일에 최적화된 웹앱 개발로 방침을 정하고 페이지 로딩 시간 또는 기타 모바일 환경에서 민감한 성능 아키텍쳐  
  특성을 정의할 수 있다. 이때에는 반드시 UX 설계자, 도메인 담당자, 기타 토메인 이해관계자들과 충분한 협의를 거쳐야 한다.

### 5.3.2 암묵적 특성

- 이 시스템에서 가용성, 신뢰성, 보안은 요구사항 정의서에는 없지만 확실히 필요한 아키텍쳐 특성이다.

---

## 설계 vs 아키텍쳐, 그리고 Tradeoff

- 실리콘 샌드위치 사례에서 맞춤성(customizability) 특성을 도출해낼 수 있는데, 바로 프로모션, 스페셜 행사와  
  관련된 요구사항이 있기 때문이다. 이 특성 자체는 문제 없지만, 문제는 이것이 아키텍쳐냐, 설계냐 하는 것이다.  
  아키텍쳐는 구조적 컴포넌트를 나타내지만, 설계는 아키테쳐 내부에 속한다. 실리콘 샌드위치의 맞춤성은 마이크로커널 같은  
  아키텍쳐 스타일을 선택해서 구조적으로 지원할 수 있지만, 만약 상충되는 다른 관심사 때문에 아키텍트가 다른 스타일을  
  선택한다면, 개발자는 템플릿 메소드 같은 설계 패턴으로 커스텀 로직을 직접 구현해 자식 클래스에서 override 가능한  
  워크플로우를 부모 클래스에 정의하는 식으로 개발할 것이다. 이 둘 중 어느 설계가 더 나을까?

- 모든 아키텍쳐가 그렇듯 이 질문도 수많은 팩터마다 달라진다.  
  먼저, 마이크로커널 아키텍쳐로 구현하지 않을 타당한 사유가 있는가? 둘째, 이렇게 설계하면 다르게 설계할 때보다  
  특별히 더 구현하기 어려운 아키텍쳐 특성이 있나? 셋째, 각 '설계 vs 패턴' 에서 모든 아키텍쳐 특성을 지원하려면  
  비용이 얼마나 들어가나?

- 이런 아키텍쳐 tradeoff 분석은 아키텍트가 하는 중요 업무의 일부인데, 아키텍트는 이런 경우 개발자, 프로젝트 관리자,  
  운영팀, 기타 소프트웨어 구축에 참여한 사람들의 협조를 구해야 한다. 어떠한 아키텍쳐 결정도 실제로 그것을 구현할 팀을  
  배제한 채 생각할 수 없다.

- 아키텍트는 아키텍쳐 특성에 우선순위를 매겨 가장 단순한 필수 세트로 정리해야 한다.  
  1차적으로 모든 아키텍쳐 특성을 식별하고 나서 가장 덜 중요한 것을 솎아내는 것도 방법이다.  
  어떤 아키텍쳐 특성이 애플리케이션에 정말 필요한지 의문이라면, 시스템에 성공하기 위해 무엇이 필요한지, 무엇이 중요한지 먼저  
  생각해보자. 가장 적합하지 않은 것을 우선 솎아내는 것도 정말 꼭 필요한 것을 결정하는 데 도움이 된다.

- 실리콘 샌드위치의 경우, 가장 덜 중요한 것은 무엇일까?  
  물론 정답은 없지만 그래도 맞춤성과 성능, 이 둘 중 하나는 포기해야 될 것이다.  
  맞춤성으 포기하면 애플리케이션 설계의 일부로 커스텀 로직을 구현할 수 있을 것이다.  
  운영 아키텍쳐 특성 중, 성공에 가장 덜 중요한 특성은 성능으로 보인다. 그렇다고 개발자가 성능이 떨어지는 애플리케이션을  
  개발해도 된다는 것은 아니다. 확장성이나 가용성 같은 다른 특성들보다 성능을 우선시하지 않는 애플리케이션을 구축한다는 뜻이다.

---
